local WindUI = loadstring(game:HttpGet("https://github.com/Footagesus/WindUI/releases/latest/download/main.lua"))()
local Players, RunService, Camera, LocalPlayer, Mouse, UIS =
    game:GetService("Players"), game:GetService("RunService"),
    workspace.CurrentCamera, game.Players.LocalPlayer, game.Players.LocalPlayer:GetMouse(),
    game:GetService("UserInputService")

local Window = WindUI:CreateWindow({
    Title = "Senixa Hub üë®‚Äçüíª",
    Icon = "rbxassetid://126601065035910",
    Author = "blox Fruits ‚öî",
    Folder = "GotHubFolder",
    Size = UDim2.fromOffset(400, 200),
    Theme = "Dark",
    Transparent = true,
    Resizable = true,
})

local Tab = Window:Tab({Title = "Auto Farm", Icon = "house"})

--// GLOBAL
getgenv().Auto_Farm = false
getgenv().StopTween = false

--// SERVICES
local Workspace = cloneref(game:GetService("Workspace"))
local Rep = cloneref(game:GetService("ReplicatedStorage"))
local Players = cloneref(game:GetService("Players"))
local RunService = game:GetService("RunService")

--// PLAYER
local Client = Players.LocalPlayer
local Character = Client.Character or Client.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")
local RootPart = Character:WaitForChild("HumanoidRootPart")
local Backpack = Client:WaitForChild("Backpack")

Client.CharacterAdded:Connect(function(char)
	Character = char
	Humanoid = char:WaitForChild("Humanoid")
	RootPart = char:WaitForChild("HumanoidRootPart")
	Backpack = Client:WaitForChild("Backpack")
end)

--// MODULES
local QuestData = require(Rep:WaitForChild("Quests"))
local GuideModule = require(Rep:WaitForChild("GuideModule"))
local Enemies = Workspace:WaitForChild("Enemies")

--// TELEPORT (SMOOTH)
local function Teleport(cf)
	local start = Character:GetPivot().Position
	local target = cf.Position
	local dist = (target - start).Magnitude
	if dist <= 0 then
		Character:PivotTo(cf)
		return
	end

	local dir = (target - start).Unit
	local speed = 185
	local moved = 0
	local startTime = tick()

	while moved < dist and not getgenv().StopTween and getgenv().Auto_Farm do
		moved = math.min((tick() - startTime) * speed, dist)
		Character:PivotTo(CFrame.new(start + dir * moved) * (cf - cf.Position))
		task.wait()
	end

	Character:PivotTo(cf)
end

local function ForceStopTween()
	getgenv().StopTween = true
	task.wait()
	getgenv().StopTween = false
end

--// REMOTE
local function Action(args)
	return Rep.Remotes.CommF_:InvokeServer(table.unpack(args))
end

--// QUEST
local function GetQuest()
	local best, levelReq, key, sub = nil, -1
	for i,v in pairs(QuestData) do
		for s,x in pairs(v) do
			if x.LevelReq and Client.Data.Level.Value >= x.LevelReq then
				if x.LevelReq > levelReq then
					best = x
					levelReq = x.LevelReq
					key = s
					sub = i
				end
			end
		end
	end

	if not best then return end
	local mobName = next(best.Task)
	local spawnCF

	for _,v in pairs(Workspace._WorldOrigin.EnemySpawns:GetChildren()) do
		if string.find(v.Name, mobName) then
			spawnCF = v.CFrame
			break
		end
	end

	local npcPos = GuideModule.GetNearestNPC(
		GuideModule,
		RootPart.Position,
		Client.Data.Level.Value
	)[1]

	return best, key, sub, npcPos, mobName, spawnCF
end

--// AUTO FARM
local function AutoFarm()
	if not getgenv().Auto_Farm then
		ForceStopTween()
		return
	end

	local quest, key, sub, npcPos, mobName, spawnCF = GetQuest()
	if not quest then return end

	local questGui = Client.PlayerGui.Main.Quest

	-- Wrong quest
	if questGui.Visible
	and not string.find(questGui.Container.QuestTitle.Title.Text, mobName) then
		Action({"AbandonQuest"})
	end

	-- Quest running
	if questGui.Visible then
		for _,mob in pairs(Enemies:GetChildren()) do
			if not getgenv().Auto_Farm then return end
			if mob.Name == mobName
			and mob:FindFirstChild("Humanoid")
			and mob.Humanoid.Health > 0 then
				repeat
					Teleport(mob.HumanoidRootPart.CFrame * CFrame.new(0,40,0))
					task.wait()
				until not mob.Parent
				or mob.Humanoid.Health <= 0
				or not questGui.Visible
				or not getgenv().Auto_Farm
			end
		end

		if spawnCF then
			Teleport(spawnCF)
		end
	else
		-- Start quest
		local npcCF = CFrame.new(npcPos)
		if (RootPart.Position - npcCF.Position).Magnitude <= 4 then
			Action({"StartQuest", sub, key})
		else
			Teleport(npcCF)
		end
	end
end

--// AUTO FARM LOOP
task.spawn(function()
	while task.wait() do
		pcall(AutoFarm)
	end
end)

--// AUTO ATTACK
task.spawn(function()
	while task.wait(0.15) do
		if not getgenv().Auto_Farm then continue end

		pcall(function()
			local nearest, dist = nil, math.huge
			for _,mob in pairs(Enemies:GetChildren()) do
				if mob:FindFirstChild("HumanoidRootPart")
				and mob:FindFirstChild("Humanoid")
				and mob.Humanoid.Health > 0 then
					local d = (mob.HumanoidRootPart.Position - RootPart.Position).Magnitude
					if d < dist then
						dist = d
						nearest = mob
					end
				end
			end

			if nearest then
				Rep.Modules.Net["RE/RegisterAttack"]:FireServer(0.1)
				Rep.Modules.Net["RE/RegisterHit"]:FireServer(
					nearest.HumanoidRootPart, {}, "002a98fe"
				)
			end
		end)
	end
end)

--// BRING MOB
local BringMobEnabled = false
local FollowMobs = {}
local BringDistance = 200
local OffsetY = 30
local MaxSpeed = 300

local function ReleaseMobs()
	for _,mob in ipairs(FollowMobs) do
		if mob and mob:FindFirstChild("HumanoidRootPart") then
			local bv = mob.HumanoidRootPart:FindFirstChild("BringBV")
			if bv then bv:Destroy() end
		end
	end
	table.clear(FollowMobs)
end

RunService.Heartbeat:Connect(function()
	BringMobEnabled = getgenv().Auto_Farm
	if not BringMobEnabled then return end
	if not RootPart then return end

	for _,mob in pairs(Enemies:GetChildren()) do
		if mob:FindFirstChild("HumanoidRootPart")
		and mob:FindFirstChild("Humanoid")
		and mob.Humanoid.Health > 0 then
			if not table.find(FollowMobs, mob) then
				local bv = Instance.new("BodyVelocity")
				bv.Name = "BringBV"
				bv.MaxForce = Vector3.new(1e6,1e6,1e6)
				bv.Parent = mob.HumanoidRootPart
				table.insert(FollowMobs, mob)
			end
		end
	end

	for i=#FollowMobs,1,-1 do
		local mob = FollowMobs[i]
		if mob and mob:FindFirstChild("HumanoidRootPart") then
			local hrp = mob.HumanoidRootPart
			local bv = hrp:FindFirstChild("BringBV")
			if bv then
				local dir = (RootPart.Position - Vector3.new(0,OffsetY,0)) - hrp.Position
				local dist = dir.Magnitude
				bv.Velocity = dist <= BringDistance
					and dir.Unit * math.clamp(dist*2,0,MaxSpeed)
					or Vector3.zero
			end
		else
			table.remove(FollowMobs,i)
		end
	end
end)

Client.CharacterAdded:Connect(function()
	task.wait(1)
	ReleaseMobs()
end)

--// TOGGLE
Tab:Toggle({
	Title = "Auto Farm Level",
	Desc = "",
	Value = false,
	Callback = function(v)
		getgenv().Auto_Farm = v
		if not v then
			ForceStopTween()
			ReleaseMobs()
		end
		print("Auto Farm:", v)
	end
})


local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local LocalPlayer = Players.LocalPlayer

local Flying = false

-- ‡∏ö‡∏¥‡∏ô‡πÑ‡∏õ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á
local function flyTo(cf)
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local distance = (hrp.Position - cf.Position).Magnitude
    local speed = 350
    local time = distance / speed

    local tween = TweenService:Create(
        hrp,
        TweenInfo.new(time, Enum.EasingStyle.Linear),
        {CFrame = cf + Vector3.new(0, 5, 0)}
    )
    tween:Play()
    tween.Completed:Wait()
end

-- ‡∏´‡∏≤ Chest ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏à‡∏≤‡∏Å‡πÉ‡∏Å‡∏•‡πâ‡πÑ‡∏õ‡πÑ‡∏Å‡∏• (Chest1, Chest2, Chest3)
local function getSortedChests()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hrp = char:WaitForChild("HumanoidRootPart")

    local chests = {}

    for _, v in ipairs(workspace:GetDescendants()) do
        if v:IsA("BasePart") and (
            v.Name == "Chest1" or
            v.Name == "Chest2" or
            v.Name == "Chest3"
        ) then
            local dist = (hrp.Position - v.Position).Magnitude
            table.insert(chests, {
                part = v,
                distance = dist
            })
        end
    end

    table.sort(chests, function(a, b)
        return a.distance < b.distance
    end)

    return chests
end

-- Toggle
Tab:Toggle({
    Title = "Auto Farm Box",
    Desc = "",
    Value = false,
    Callback = function(v)
        Flying = v
        print("Toggle:", v)

        if v then
            task.spawn(function()
                while Flying do
                    local chests = getSortedChests()
                    for _, data in ipairs(chests) do
                        if not Flying then break end
                        if data.part and data.part.Parent then
                            flyTo(data.part.CFrame)
                            task.wait(0.2)
                        end
                    end
                    task.wait(1)
                end
            end)
        end
    end
})


local Tab = Window:Tab({Title = "Combat", Icon = "crosshair"})

-- =========================
-- GLOBAL
-- =========================
getgenv().AimbotEnabled = false
getgenv().FOV = 70
getgenv().TargetPosition = nil

-- =========================
-- SERVICES
-- =========================
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer

-- =========================
-- FOV CIRCLE
-- =========================
local fovCircle = Drawing.new("Circle")
fovCircle.Color = Color3.new(1,1,1)
fovCircle.Thickness = 2
fovCircle.NumSides = 100
fovCircle.Filled = false
fovCircle.Transparency = 1
fovCircle.Visible = false

-- =========================
-- TRACER
-- =========================
local tracer = Drawing.new("Line")
tracer.Color = Color3.fromRGB(255,0,0)
tracer.Thickness = 2
tracer.Transparency = 1
tracer.Visible = false

-- =========================
-- GET CLOSEST TARGET
-- =========================
local function getClosest()
    local closest = nil
    local shortest = getgenv().FOV
    local center = Camera.ViewportSize / 2

    for _, p in pairs(Players:GetPlayers()) do
        if p ~= LocalPlayer
        and p.Character
        and p.Character:FindFirstChild("HumanoidRootPart")
        and p.Character:FindFirstChild("Humanoid")
        and p.Character.Humanoid.Health > 0 then

            local hrp = p.Character.HumanoidRootPart
            local pos, on = Camera:WorldToViewportPoint(hrp.Position)

            if on then
                local d = (Vector2.new(pos.X,pos.Y) - center).Magnitude
                if d < shortest then
                    shortest = d
                    closest = hrp
                end
            end
        end
    end

    return closest
end

-- =========================
-- RENDER LOOP
-- =========================
RunService.RenderStepped:Connect(function()
    local size = Camera.ViewportSize
    local center = Vector2.new(size.X/2, size.Y/2)

    fovCircle.Position = center
    fovCircle.Radius = getgenv().FOV
    fovCircle.Visible = getgenv().AimbotEnabled

    if not getgenv().AimbotEnabled then
        tracer.Visible = false
        getgenv().TargetPosition = nil
        return
    end

    local hrp = getClosest()
    if hrp then
        local pos, on = Camera:WorldToViewportPoint(hrp.Position)
        if on then
            tracer.From = center
            tracer.To = Vector2.new(pos.X,pos.Y)
            tracer.Visible = true
            getgenv().TargetPosition = hrp.CFrame
            return
        end
    end

    tracer.Visible = false
    getgenv().TargetPosition = nil
end)

-- =========================
-- NAMECALL HOOK
-- =========================
local mt = getrawmetatable(game)
local old = mt.__namecall
setreadonly(mt, false)

mt.__namecall = newcclosure(function(...)
    local method = getnamecallmethod()
    local args = {...}

    if not getgenv().AimbotEnabled or not getgenv().TargetPosition then
        return old(unpack(args))
    end

    if method == "FireServer" then
        if typeof(args[2]) == "CFrame" then
            args[2] = getgenv().TargetPosition
        elseif typeof(args[2]) == "Vector3" then
            args[2] = getgenv().TargetPosition.Position
        end
        return old(unpack(args))
    end

    if method == "InvokeServer" then
        if typeof(args[3]) == "CFrame" then
            args[3] = getgenv().TargetPosition
        elseif typeof(args[3]) == "Vector3" then
            args[3] = getgenv().TargetPosition.Position
        end
        return old(unpack(args))
    end

    return old(unpack(args))
end)

setreadonly(mt, true)

-- =========================
-- UI : TOGGLE
-- =========================
Tab:Toggle({
    Title = "Silent aim",
    Desc = "",
    Value = false,
    Callback = function(v)
        getgenv().AimbotEnabled = v
    end
})

-- =========================
-- UI : SLIDER (FOV)
-- =========================
Tab:Slider({
    Title = "FOV",
    Desc = "",
    Step = 1,
    Value = {
        Min = 20,
        Max = 500,
        Default = 70,
    },
    Callback = function(value)
        getgenv().FOV = value
    end
})

local Tab = Window:Tab({Title = "Player", Icon = "user"})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Character = nil

-- ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÄ‡∏™‡∏°‡∏≠ (‡∏ï‡∏≠‡∏ô‡∏ï‡∏≤‡∏¢ / ‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà)
local function UpdateCharacter()
    Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
end
UpdateCharacter()

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(0.2)
    UpdateCharacter()
end)

-- =====================
-- Dash Length (‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡∏•‡∏≠‡∏î)
-- =====================
Tab:Slider({
    Title = "Dash Length",
    Desc = "",
    Step = 5,
    Value = {
        Min = 16,
        Max = 1000,
        Default = 16
    },
    Callback = function(value)
        if Character then
            Character:SetAttribute("DashLength", value)
        end
    end
})

-- =====================
-- Walking On Water (Toggle)
-- =====================
Tab:Toggle({
    Title = "Walking On Water",
    Desc = "",
    Value = false,
    Callback = function(v)
        if Character then
            Character:SetAttribute("WaterWalking", v)
        end
    end
})

-- ‚ö° Toggle: Jump Boost + Infinite Jump
Tab:Toggle({
    Title = "Jump Boost",
    Desc = "",
    Value = false,
    Callback = function(state)
        getgenv().JumpBoostEnabled = state
        print("Jump Boost:", state)

        local Players = game:GetService("Players")
        local UserInputService = game:GetService("UserInputService")
        local LocalPlayer = Players.LocalPlayer

        -- ‡∏•‡∏ö‡∏Ç‡∏≠‡∏á‡πÄ‡∏Å‡πà‡∏≤
        if getgenv().JumpBoostConnection then
            getgenv().JumpBoostConnection:Disconnect()
            getgenv().JumpBoostConnection = nil
        end

        if getgenv().JumpBoost_CharAdded then
            getgenv().JumpBoost_CharAdded:Disconnect()
            getgenv().JumpBoost_CharAdded = nil
        end

        -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Jump + Infinite Jump
        local function SetupJump(Character)
            if not getgenv().JumpBoostEnabled then return end
            local Humanoid = Character:WaitForChild("Humanoid")

            -- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏π‡∏á‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î
            Humanoid.JumpPower = 1000     -- ‚Üê ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ
            Humanoid.JumpHeight = 1000     -- ‚Üê ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ

            -- ‡∏ó‡∏≥ Infinite Jump
            getgenv().JumpBoostConnection = UserInputService.InputBegan:Connect(function(input, g)
                if g then return end
                if input.KeyCode ~= Enum.KeyCode.Space then return end

                if getgenv().JumpBoostEnabled then
                    Humanoid:ChangeState(Enum.HumanoidStateType.Jumping)
                end
            end)
        end

        -- ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå ‚Üí ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
        if state then
            local Char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
            SetupJump(Char)

            -- ‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡πÉ‡∏´‡∏°‡πà
            getgenv().JumpBoost_CharAdded = LocalPlayer.CharacterAdded:Connect(function(newChar)
                task.wait(0.5)
                if getgenv().JumpBoostEnabled then
                    SetupJump(newChar)
                end
            end)
        end
    end
})

local InvisibleRunning = false

-- ‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏õ
local INVIS_CFRAME = CFrame.new(-1232.159423828125, 13.274794578552246, 4113.931640625)

Tab:Button({
    Title = "Invisible",
    Description = "TP + FFlag trick + Reset",
    Callback = function()
        if InvisibleRunning then return end
        InvisibleRunning = true

        local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local hrp = char:WaitForChild("HumanoidRootPart")
        local hum = char:WaitForChild("Humanoid")

        -- ‡∏à‡∏≥‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°
        local oldCFrame = hrp.CFrame

        -- ‡∏ß‡∏≤‡∏õ‡πÑ‡∏õ‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î
        hrp.CFrame = INVIS_CFRAME
        task.wait(0.2)

        -- ‡∏õ‡∏¥‡∏î FFlag
        setfflag("NextGenReplicatorEnabledWrite4", "false")
        print("NextGenReplicatorEnabledWrite4 false")

        task.wait(2)

        -- ‡πÄ‡∏õ‡∏¥‡∏î FFlag ‡∏Å‡∏•‡∏±‡∏ö
        setfflag("NextGenReplicatorEnabledWrite4", "true")
        print("NextGenReplicatorEnabledWrite4 true")

        task.wait(0.2)

        -- ‡∏ß‡∏≤‡∏õ‡∏Å‡∏•‡∏±‡∏ö‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡πÄ‡∏î‡∏¥‡∏°
        hrp.CFrame = oldCFrame
        task.wait(0.1)

        -- ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£
        hum.Health = 0

        InvisibleRunning = false
    end
})

local Tab = Window:Tab({Title = "Auto up Stats", Icon = "key"})

-- =========================
-- AUTO STATS CONFIG
-- =========================
local statsToAdd = {
    "Melee",
    "Defense",
    "Sword",
    "Gun",
    "Demon Fruit"
}

local auto_stats = false

-- =========================
-- AUTO STATS TOGGLE
-- =========================
Tab:Toggle({
    Title = "Auto Stats",
    Desc = "",
    Value = false,
    Callback = function(Value)
        auto_stats = Value

        if auto_stats then
            task.spawn(function()
                while auto_stats do
                    task.wait(0.1)
                    for _, stat in ipairs(statsToAdd) do
                        pcall(function()
                            game:GetService("ReplicatedStorage")
                                .Remotes
                                .CommF_
                                :InvokeServer("AddPoint", stat, 1)
                        end)
                    end
                end
            end)
        end
    end
})

-- =========================
-- STAT SELECTION DROPDOWN
-- =========================
Tab:Dropdown({
    Title = "Select Stat",
    Desc = "",
    Values = {
        "Melee",
        "Defense",
        "Sword",
        "Gun",
        "Demon Fruit"
    },
    Multi = true, -- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤
    Default = {"Melee"},
    Callback = function(Value)
        statsToAdd = Value
    end
})

